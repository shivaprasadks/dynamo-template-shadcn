import * as __WEBPACK_EXTERNAL_MODULE__supabase_supabase_js_06b6e9fe__ from "@supabase/supabase-js";
import * as __WEBPACK_EXTERNAL_MODULE_openai__ from "openai";
const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;
const supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;
const supabase = (0, __WEBPACK_EXTERNAL_MODULE__supabase_supabase_js_06b6e9fe__.createClient)(supabaseUrl, supabaseAnonKey);
const openai = new __WEBPACK_EXTERNAL_MODULE_openai__["default"]({
    apiKey: process.env.OPENAI_API_KEY
});
async function searchCode(query) {
    const embedding = await openai.embeddings.create({
        model: 'text-embedding-ada-002',
        input: query
    });
    const { data: results, error } = await supabase.rpc('match_documents', {
        query_embedding: embedding.data[0].embedding,
        match_threshold: 0.7,
        match_count: 5
    });
    if (error) throw error;
    return results;
}
export { searchCode };
